# 개요

이 문서는 보드게임 '토이배틀'의 룰을 담고있습니다.
당신은 이 문서를 바탕으로 보드게임 '토이배틀'을 즐길 수 있는 보드게임플랫폼을 만들어야 합니다.

## 선호되는 기술스택

백엔드

- NestJs, NodeJs
- mysql(NestJS의 경우 Prisma ORM, typeORM등을 사용해도 좋음)

프론트엔드

- React(typescript)

웹소캣으로 플레어이간 게임데이터를 전송하고 이벤트를 발생시키는 방식으로 구현한다.

## 구현순서

- 게임방 시스템 -> 진행
  - 방 만들기, 방 참여하기, 방 나가기, 게임 시작하기
- 게임 시스템 -> 진행
  - 맵에 대한 정보는 아직 입력하지 않았으니 그 부분을 제외하고 구현할 것.
- 회원 시스템 -> 추후에 진행
- 게임내 채팅 시스템 -> 추후에 진행

## 📘 토이 배틀 공식 룰북

### 🎯 게임 목표

장난감 병정들을 이용해 전장에서 상대 본부를 점령하거나, 정해진 수의 훈장을 먼저 모으는 것이 목표입니다.

### 🧩 카드(병정)의 구성 요소

각 병정 타일은 다음과 같은 요소로 구성됩니다:

- 번호 (1~7): 병정의 종류를 나타냅니다.
- 이름: 병정의 고유 명칭 (예: 해골이, 캡틴 등)
- 힘 수치: 전장에서 배치 우위를 결정하는 데 사용됩니다.
- 효과: 병정을 배치할 때 발동하는 능력입니다.
- 일러스트: 병정을 시각적으로 구분하기 위한 그림입니다.

### 🧙‍♂️ 병정 1~7번 효과

번호 병정 이름 효과 설명
1 해골이 즉시 병정 2개를 공급처에서 뽑아 받침대에 놓습니다. 단, 받침대의 병정 수가 8개를 초과할 수 없습니다.
2 캡틴 병정을 한 개 더 배치할 수 있는 기회를 줍니다. 추가로 배치한 병정의 효과도 즉시 발동됩니다.
3 거인병 배치 시, 인접한 칸 중 하나에 있는 상대 병정을 제거할 수 있습니다 (맨 위 병정만 가능).
4 코코 선장 본부와 연결되지 않은 거점에도 병정을 배치할 수 있습니다. 단, 상대 본부에는 불가합니다.
5 XB-42 배치 시, 상대 받침대에서 무작위 병정 1개를 제거(버림 더미로 이동)합니다.
6 레인보우 병정 1개를 공급처에서 뽑아 받침대에 추가합니다. 받침대 최대 수(8개)를 초과할 수 없습니다.
7 렉시 효과는 없지만 힘이 매우 강력합니다. 배치 우위에 유리합니다.
8 꽉스 조커병정으로, 배치 우위를 무시합니다. 번호(힘)에 상관없이 배치할 수 있지만 다른 병정들도 꽉스위에 배치할 수 있습니다.

### 구성

한 플레어이당 1~8번 병정이 각 3장씩 총 24장이 존재함.

### 📦 게임 준비

전장 보드를 선택하고 플레이어는 마주 보며 앉습니다.

진영 색(빨강/파랑)을 정하고, 목표 훈장 수를 확인합니다.

병정 타일을 모두 섞은 후 각자 공급처를 구성합니다.

공급처에서 병정 4개는 제외하여 사용하지 않습니다.

버림 더미 공간을 마련합니다.

선공과 후공을 정합니다.

선공: 병정 3개, 후공: 병정 4개를 받침대에 올려놓습니다.

### 📍 병정 배치 규칙

- 병정은 전장의 배치 가능한 칸에만 놓을 수 있습니다.
- 병정은 반드시 자신의 본부와 연결된 경로 상에만 배치할 수 있습니다.
- 이미 병정이 있는 칸에는 상단 병정의 힘 수치보다 더 큰 병정만 올려놓을 수 있습니다.
- 비어 있는 칸이나 자신의 병정이 맨 위인 칸에는 자유롭게 배치 가능합니다.
- 병정 배치 후 해당 병정의 효과를 먼저 적용하고, 그 다음에 특별 거점 효과를 적용합니다.

### 🔁 자신의 차례에 할 수 있는 행동

매 차례 다음 중 하나를 선택하여 수행합니다:

1. 병정 2개 뽑기

- 자신의 공급처에서 병정 2개를 뽑아 받침대에 놓습니다.
- 받침대는 최대 8개까지 병정을 보유할 수 있습니다.
- 현재 병정이 7개인 경우는 1개만 뽑습니다.

2. 병정 1개 배치하기

- 받침대에 있는 병정 중 하나를 전장에 배치합니다.
- 병정을 놓은 후, 해당 병정의 효과 → 특별 거점 효과 순으로 발동합니다.

### 🏆 승리 조건

게임은 다음 중 하나라도 달성한 순간 종료되고 해당 플레이어가 승리합니다:

1. 상대 본부를 점령

- 전장에 따라 본부가 2개일 수도 있으며, 1개만 점령해도 승리입니다.

2. 정해진 수의 훈장 획득

- 전장마다 목표 훈장 수가 다릅니다.

### 예외 종료 조건:

플레이어가 병정을 더 뽑을 수도, 배치할 수도 없을 때 게임이 종료됩니다.
→ 훈장이 더 많은 쪽이 승리, 동점 시 차례를 진행하지 못한 쪽이 패배합니다.
